<div class="top-bar">
  
  <!-- Sidebar Toggle -->
  <button class="icon-btn" (click)="returnToTables()">
    ‚ò∞
  </button>

  <!-- Search Box -->
  <div class="search-box" *ngIf="!tableMode">
    <input type="text" placeholder="Search Product here..." (input)="searchProducts($event)">
    <span class="search-icon">üîç</span>
  </div>

  <!-- Payment Panel Toggle -->
  <button class="icon-btn" (click)="togglePaymentPanel()" *ngIf="!tableMode">
    ‚ò∞
  </button>

</div>

<!-- TABLE SERVE MODE -->
<div class="dashboard-container" *ngIf="tableMode">

  <div class="left-section">

      <!-- NON AC BLOCK -->
      <div class="zone-card">
        <h2>Non AC</h2>
        <div class="tables-grid">

          <div class="table-card"
               *ngFor="let t of nonAcTables"
               [ngClass]="getStatusClass(t)"
               (click)="onTableClick('NonAC', t)">
            
            <div>{{ t }}</div>

            <!-- TIMER UNDER TABLE -->
            <div class="timer-text" *ngIf="tableTimers[t]">
              ‚è± {{ tableTimers[t] }}
            </div>

          </div>

          <!-- Delivery / Parcel -->
          <div class="table-card dp-card" (click)="onDpClick('NonAC')">
            D/P
          </div>

        </div>
      </div>

      <!-- AC BLOCK -->
      <div class="zone-card">
        <h2>AC</h2>
        <div class="tables-grid">

          <div class="table-card"
               *ngFor="let t of acTables"
               [ngClass]="getStatusClass(t)"
               (click)="onTableClick('AC', t)">
            
            <div>{{ t }}</div>

            <div class="timer-text" *ngIf="tableTimers[t]">
              ‚è± {{ tableTimers[t] }}
            </div>

          </div>

          <div class="table-card dp-card" (click)="onDpClick('AC')">
            D/P
          </div>

        </div>
      </div>

  </div>

  <!-- RIGHT CHART -->
  <div class="chart-container" *ngIf="tableMode">
    <!-- Uncomment if you want chart -->
    <app-sales-chart></app-sales-chart>
  </div>

</div>


<!-- PAYMENT MODE -->
<div class="dashboard-container" *ngIf="showPaymentPanel">

  <!-- LEFT SIDE -->
  <div class="left-section">

    <!-- Food Types -->
    <app-food-tabs (foodTypeChanged)="loadItemsByType($event)"></app-food-tabs>

    <!-- Food Items -->
    <div class="item-grid">
      <div class="item-card" *ngFor="let item of menuItems">

        <img [src]="item.imageUrl" class="item-image">

        <div class="item-name">{{ item.itemName }}</div>
        <div class="item-price">‚Çπ{{ item.itemCost }}</div>

        <div class="qty-box">
          <button (click)="decrease(item)">-</button>
          <span>{{ item.qty }}</span>
          <button (click)="increase(item)">+</button>
        </div>

      </div>
    </div>
  </div>

  <!-- PAYMENT PANEL -->
  <div class="payment-panel">

    <h3 class="panel-title">Your Order</h3>

    <div class="payment-list" *ngFor="let c of cart">
      <div class="p-item">
        <img [src]="c.imageUrl" class="p-img">
        <div class="p-text">
          <strong>{{ c.itemName }}</strong>
          <small>x{{ c.qty }}</small>
        </div>
        <div class="p-price">‚Çπ{{ c.qty * c.itemCost }}</div>
      </div>
    </div>

    <hr>

    <div class="totals">
      <div class="row">
        <span>Sub Total</span>
        <strong>‚Çπ{{ totalAmount }}</strong>
      </div>

      <div class="row">
        <span>Tax 5%</span>
        <strong>‚Çπ{{ (totalAmount * 0.05) | number:'1.2-2' }}</strong>
      </div>

      <div class="row total-final">
        <span>Total Amount</span>
        <strong>‚Çπ{{ totalAmount + (totalAmount*0.05) }}</strong>
      </div>
    </div>

    <!-- ORDER TYPE -->
    <div class="order-type-toggle">
  <!-- DineIn disabled until cart has at least one item -->
  <button
    [class.active]="orderType === 'OrderIn'"
    (click)="selectOrderType('OrderIn')"
    [disabled]="cart.length === 0">
    Dine in
  </button>

  <button
    [class.active]="orderType === 'Parcel'"
    (click)="selectOrderType('Parcel')"
    [disabled]="cart.length === 0">
    Take Away
  </button>

  <button
    [class.active]="orderType === 'Delivery'"
    (click)="selectOrderType('Delivery')"
    [disabled]="cart.length === 0">
    Delivery
  </button>
</div>

    <!-- TIMER IN PAYMENT PANEL -->
    <div class="timer-label" *ngIf="orderType === 'OrderIn'">
      ‚è± {{ timerDisplay }}
    </div>

    <!-- Payment Buttons -->
    <div class="payment-buttons">
  <button class="pay-btn" [disabled]="!orderType">Cash</button>
  <button class="pay-btn" [disabled]="!orderType">Card</button>
  <button class="pay-btn" [disabled]="!orderType">QR Code</button>
</div>

    <button class="place-order">Place Order</button>

  </div>

</div>
